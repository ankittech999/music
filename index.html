<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Music Player</title>
    
</head>
<body>
    <div class="container">
      <div class="music-player">
        <nav>
            <div class="circle">
                    <img src="./arrow_back_ios_FILL0_wght400_GRAD0_opsz24.svg" alt="">
                
            </div>
            <div class="circle">
                   <img src="./menu_FILL0_wght400_GRAD0_opsz24.svg" alt="">
            </div>
        </nav>
        <div class="music-image">
           <img src="./boy2.jpg" alt="" class="resize">
           <h1 id="songname"></h1>
           <p id="artistname"></p>
        </div>
        <audio  id="song">
            <source src="./01 - Sultan Title Track - Salman Khan Version (128 Kbps) - DownloadMing.SE.mp3" type="audio/mpeg" >
        </audio>
        <input type="range" value="0" id="progress">

        <div class="controls">
            <div><img src="./backward.svg" alt="" id="backward"></div>
            <div><img src="./play.svg" alt="" id="ctrlicon"></div>
            <div><img src="./forward.svg" alt="" id="forward"></div>
        </div>
      </div>
    </div>
    <script>
         let data={
    "music":[
        {
            "name":"Sultan Title Track",
            "artist":"Vishal - Shekhar",
            "path":"01 - Sultan Title Track - Salman Khan Version (128 Kbps) - DownloadMing.SE.mp3"
        },
        {
            "name":"Yalgaar",
            "artist":"Ajay Nagar",
            "path":"01 - Yalgaar (320 Kbps) - DownloadMing.ME.mp3" 
        }
        ,
        {
            "name":"Dil Ibadat",
            "artist":"KK",
            "path":"02 - Dil Ibadat - www.downloadming.com.mp3"
        },
        {
            "name":"Banjaara",
            "artist":"Mithoon and Mohammed Irfan",
            "path":"02 Banjaara - Ek Villain ( PagalWorld.com ).mp3"
        },
        {
            "name":"Uska Hi Bana",
            "artist":"Arijit Singh",
            "path":"02. Uska Hi Banana.mp3"
        },
        {
        
                "name":"Wajah Tum Ho",
                "artist":"Abhijit Vaghani and Gourov-Roshin",
                "path":"03 Wajah Tum Ho - Hate Story 3 (Armaan Malik) 190Kbps.mp3"
            
        },
        {
            "name":"Pal",
            "artist":"Arijit Singh & Shreya Ghoshal",
            "path":"02 Pal - Jalebi - Arijit Singh.mp3"
        },
        {
            "name":"Brothers Anthem",
            "artist":"Ajay-Atul and Vishal Dadlani",
            "path":"Brothers Anthem - Brothers 320 Kbps.mp3"
        },
        {
            "name":"Jalebi Baby",
            "artist":"Tesher",
            "path":"Jalebi Baby_320(PagalWorld).mp3"
        },
        {
            "name":"Paisa Hai Toh",
            "artist":"MellowD, Sachinâ€“Jigar, and Vishal Dadlani",
            "path":"Paisa-Hai-Toh_320(PagalWorldl).mp3"
        },
        {
            "name":"Awara Sham Hai",
            "artist":"Meet Bros",
            "path":"Aawara Shaam Hai - Manjul Khattar.mp3"
        }
    ]
};
        let progress=document.getElementById('progress');
        let song=document.getElementById('song');
        let ctrlicon=document.getElementById('ctrlicon');
        let sgname=document.getElementById('songname');
        sgname.innerHTML=data["music"][0]["name"];
        let artname=document.getElementById('artistname');
        song.onloadedmetadata=function(){
            progress.max=song.duration;
            progress.value=song.currentTime;

        }
        console.log(ctrlicon.src);
      
        function playPause(){
            let src=new URL(ctrlicon.src);
            let str=src.pathname.toString();
            str=str.split('/music/');
            console.log(str);
            if(str[1]=='play.svg'){
            song.play();
               ctrlicon.src='./pause.svg'

             }
        else{
            song.pause();
            ctrlicon.src='./play.svg'
        }
        }
        if(song.play()){
            setInterval(()=>{
                    progress.value=song.currentTime;
            },500)
        }
        
        var i=0;
        let backward=document.getElementById('backward');
        let forward=document.getElementById('forward');
        ctrlicon.addEventListener('click',()=>{
             playPause();
        })
        backward.addEventListener('click',()=>{
            if(i==0){
                 let tempsrc=data["music"][10]["path"];
                sgname.innerHTML=data["music"][10]["name"];
                artname.innerHTML=data["music"][10]["artist"];
                song.src='./'+tempsrc;
                song.play();
                ctrlicon.src='./pause.svg';
                i=10;
            }
            else{
                let tempsrc=data["music"][i]["path"];
                sgname.innerHTML=data["music"][i]["name"];
                artname.innerHTML=data["music"][i]["artist"];
                song.src='./'+tempsrc;
                song.src='./'+tempsrc;
                song.play();
                ctrlicon.src='./pause.svg'
                i=i-1;
            }
        })
        forward.addEventListener('click',()=>{
            if(i==10){
                let tempsrc=data["music"][0]["path"];
                sgname.innerHTML=data["music"][0]["name"];
                artname.innerHTML=data["music"][0]["artist"];
                song.src='./'+tempsrc;
                song.play();
                ctrlicon.src='./pause.svg'
                i=0;
            }
            else{
                i=i+1;
               let tempsrc=data["music"][i]["path"];
                sgname.innerHTML=data["music"][i]["name"];
                artname.innerHTML=data["music"][i]["artist"];
                song.src='./'+tempsrc;
                song.play();
                ctrlicon.src='./pause.svg'
              
            }
        })
        progress.onchange=function(){
            song.play();
            song.currentTime=progress.value;
            ctrlicon.src='./pause.svg'
        }
    </script>
    
</body>
</html>
